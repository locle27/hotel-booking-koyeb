{% extends "base.html" %}

{% block title %}Chi ti·∫øt Ng√†y {{ date }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">üìÖ Chi ti·∫øt Ho·∫°t ƒë·ªông Ng√†y {{ date }}</h1>

    <div class="row">
        <!-- C·ªôt Check-in -->
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">üõ¨ Kh√°ch Check-in ({{ check_in|length }})</h5>
                </div>
                <div class="card-body">
                    {% if check_in %}
                        {% for booking in check_in %}
                            <div class="guest-card">
                                <p class="guest-name">{{ booking.get('T√™n ng∆∞·ªùi ƒë·∫∑t', 'N/A') }}</p>
                                <p class="room-type">{{ booking.get('T√™n ch·ªó ngh·ªâ', 'N/A') }}</p>
                                <p class="details">
                                    <strong>M√£ ƒêP:</strong> {{ booking.get('S·ªë ƒë·∫∑t ph√≤ng', 'N/A') }}<br>
                                    <strong>Tr·∫£ ph√≤ng:</strong> {{ booking['Check-out Date'].strftime('%d/%m/%Y') if booking['Check-out Date'] and pd.notna(booking['Check-out Date']) else 'N/A' }}<br>
                                    <strong>Ng∆∞·ªùi thu:</strong> {{ booking.get('Ng∆∞·ªùi thu ti·ªÅn', 'N/A') }}<br>
                                    <strong>Thanh to√°n:</strong> {{ "{:,.0f}".format(booking.get('T·ªïng thanh to√°n', 0)) }}ƒë
                                </p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted mb-0">Kh√¥ng c√≥ kh√°ch check-in h√¥m nay.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- C·ªôt ƒêang ·ªü -->
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">üè® Kh√°ch ƒêang ·ªû ({{ staying_over|length }})</h5>
                </div>
                <div class="card-body">
                    {% if staying_over %}
                        {% for booking in staying_over %}
                            <div class="guest-card">
                                <p class="guest-name">{{ booking.get('T√™n ng∆∞·ªùi ƒë·∫∑t', 'N/A') }}</p>
                                <p class="room-type">{{ booking.get('T√™n ch·ªó ngh·ªâ', 'N/A') }}</p>
                                <p class="details">
                                    <strong>M√£ ƒêP:</strong> {{ booking.get('S·ªë ƒë·∫∑t ph√≤ng', 'N/A') }}<br>
                                    <strong>·ªû t·ª´:</strong> {{ booking['Check-in Date'].strftime('%d/%m') if booking['Check-in Date'] and pd.notna(booking['Check-in Date']) else 'N/A' }} - <strong>Tr·∫£:</strong> {{ booking['Check-out Date'].strftime('%d/%m') if booking['Check-out Date'] and pd.notna(booking['Check-out Date']) else 'N/A' }}<br>
                                    <strong>ƒê√£ ·ªü:</strong> {{ (current_date - booking['Check-in Date']).days if booking['Check-in Date'] and pd.notna(booking['Check-in Date']) else 'N/A' }} ƒë√™m<br>
                                    <strong>Ng∆∞·ªùi thu:</strong> {{ booking.get('Ng∆∞·ªùi thu ti·ªÅn', 'N/A') }}<br>
                                    <strong>Thanh to√°n:</strong> {{ "{:,.0f}".format(booking.get('T·ªïng thanh to√°n', 0)) }}ƒë
                                </p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted mb-0">Kh√¥ng c√≥ kh√°ch ƒëang ·ªü l·∫°i.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- C·ªôt Check-out -->
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">üõ´ Kh√°ch Check-out ({{ check_out|length }})</h5>
                </div>
                <div class="card-body">
                    {% if check_out %}
                        {% for booking in check_out %}
                            <div class="guest-card">
                                <p class="guest-name">{{ booking.get('T√™n ng∆∞·ªùi ƒë·∫∑t', 'N/A') }}</p>
                                <p class="room-type">{{ booking.get('T√™n ch·ªó ngh·ªâ', 'N/A') }}</p>
                                <p class="details">
                                    <strong>M√£ ƒêP:</strong> {{ booking.get('S·ªë ƒë·∫∑t ph√≤ng', 'N/A') }}<br>
                                    <strong>Th·ªùi gian ·ªü:</strong> {{ (booking['Check-out Date'] - booking['Check-in Date']).days if booking['Check-in Date'] and booking['Check-out Date'] and pd.notna(booking['Check-in Date']) and pd.notna(booking['Check-out Date']) else 'N/A' }} ƒë√™m<br>
                                    <strong>Ng∆∞·ªùi thu:</strong> {{ booking.get('Ng∆∞·ªùi thu ti·ªÅn', 'N/A') }}<br>
                                    <strong>Thanh to√°n:</strong> {{ "{:,.0f}".format(booking.get('T·ªïng thanh to√°n', 0)) }}ƒë
                                </p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted mb-0">Kh√¥ng c√≥ kh√°ch check-out h√¥m nay.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <a href="{{ url_for('calendar_view') }}" class="btn btn-secondary mt-3">&larr; Quay l·∫°i L·ªãch</a>
</div>

<style>
    .guest-card {
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
        margin-bottom: 10px;
    }
    .guest-card:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }
    .guest-name { font-weight: bold; font-size: 1.1em; }
    .room-type { font-style: italic; color: #555; }
    .details { font-size: 0.9em; color: #666; margin-top: 5px; }
</style>
{% endblock %} 